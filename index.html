<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Task Manager Console</title>
  <style>
    body {
      background: #111;
      color: #0f0;
      font-family: monospace;
      padding: 10px;
    }
    #console {
      white-space: pre-wrap;
      min-height: 300px;
    }
    input {
      background: #000;
      color: #0f0;
      border: none;
      outline: none;
      font-family: monospace;
      width: 100%;
    }
    .fletcher #console {
      color: transparent;
    }
    .fletcher #console span {
      white-space: pre-wrap;
    }
    .fletcher .alt1 {
      color: white;
      background: black;
    }
    .fletcher .alt2 {
      color: black;
      background: white;
    }
    #jcena {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 80%;
      max-height: 80%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      z-index: 9999;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="console">User: </div>
  <input id="input" type="text" autofocus />
  <img id="jcena" src="and-his-name-is-john-cena.gif" alt="John Cena" />
  <audio id="jcena-audio" src="and-his-name-is-john-cena-1.mp3"></audio>

  <script>
    window.onload = function () {
      const consoleEl = document.getElementById('console');
      const inputEl = document.getElementById('input');
      const body = document.body;

      const cenaImg = document.getElementById('jcena');
      const cenaAudio = document.getElementById('jcena-audio');

      let users = {};
      let currentUser = null;
      let step = 'user';
      let state = {};
      let fletcherMode = false;

      function print(msg = '') {
        if (fletcherMode) {
          const html = msg.split('').map((char, i) => {
            const cls = i % 2 === 0 ? 'alt1' : 'alt2';
            return `<span class="${cls}">${char}</span>`;
          }).join('');
          consoleEl.innerHTML += html + '<br>';
        } else {
          consoleEl.textContent += '\n' + msg;
        }
        window.scrollTo(0, document.body.scrollHeight);
      }

      function prompt(text) {
        print(text);
      }

      function showCommands() {
        const commands = [
          "add - Add a new task",
          "color - Assign a description to a task",
          "commands - List available commands",
          "coords - Show current coordinates",
          "date - Show today's date",
          "eta - Adds an estimated time the task will take",
          "fin - Finish/delete a task",
          "list - List all tasks",
          "new_user - Create and switch to a new user",
          "nvm - Cancels any current execution",
          "time - Add time to a task",
          "user - Switch to existing user",
          "/pee - Turn text yellow (pee on console)",
          "/kill - Turn text red (simulate shutdown)",
          "/revive - Turn text green (revive console)",
          "/cubo - Turn text sienna (like my cat cubo!)",
          "/egg - Turn text white (it's Egging time!)",
          "/fletcher - Turn text to be black and white (like my dog fletcher!)",
          "jonathan cena - Surprise!"
        ];
        print("Available Commands:\n" + commands.join('\n'));
      }

      function handleCommand(val) {
        const command = val.trim().toLowerCase();

        if (command === 'commands') {
          showCommands();
        } else if (command === '/pee') {
          body.style.color = "yellow";
          inputEl.style.color = "yellow";
          body.classList.remove('fletcher');
          fletcherMode = false;
          print("Console is now yellow.");
        } else if (command === '/kill') {
          body.style.color = "red";
          inputEl.style.color = "red";
          body.classList.remove('fletcher');
          fletcherMode = false;
          print("Console is now red.");
        } else if (command === '/cubo') {
          body.style.color = "sienna";
          inputEl.style.color = "sienna";
          body.classList.remove('fletcher');
          fletcherMode = false;
          print("Console is now sienna.");
        } else if (command === '/egg') {
          body.style.color = "ivory";
          inputEl.style.color = "ivory";
          body.classList.remove('fletcher');
          fletcherMode = false;
          print("Console is now ivory.");
        } else if (command === '/fletcher') {
          fletcherMode = true;
          body.classList.add('fletcher');
          print("FLETCHER MODE activated.");
        } else if (command === '/revive') {
          body.classList.remove('fletcher');
          fletcherMode = false;
          body.style.color = "#0f0";
          inputEl.style.color = "#0f0";
          print("Console revived and reset.");
        } else if (command === 'jonathan cena') {
          cenaAudio.currentTime = 0;
          cenaAudio.play();
          cenaImg.style.opacity = 1;
          setTimeout(() => {
            cenaImg.style.opacity = 0;
          }, 4500);
          print("ðŸŽºðŸŽºðŸŽº");
        } else {
          print("Unknown command. Type 'commands' to see options.");
        }
      }

      inputEl.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          const val = inputEl.value.trim();
          print(`execute: ${val}`);
          inputEl.value = '';

          if (step === 'user') {
            currentUser = val;
            if (!users[currentUser]) users[currentUser] = { tasks: [] };
            print(`Hello ${currentUser}`);
            step = 'main';
          } else if (step === 'main') {
            handleCommand(val);
          }
        }
      });
    };
  </script>
</body>
</html>
